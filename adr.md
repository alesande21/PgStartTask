## Decision Record: Выбор архитектуры и технологий для PgStartTask

## Status

Предложено (2024-05-14)

## Context

Необходимо разработать приложение на Go, которое будет предоставлять REST API для запуска и управления bash-скриптами. Основные функциональные требования включают создание, запуск, остановку команд, а также хранение результатов выполнения команд в базе данных. Приложение должно поддерживать параллельное выполнение команд.

## Decision

Для реализации приложения выбрана следующая архитектура и технологии:

- **Язык программирования**: Golang
- **База данных**: PostgreSQL
- **API**: RESTful API с использованием стандартных библиотек Go
- **Конкурентное выполнение команд**: Использование горутин и каналов для параллельного выполнения и управления командами
- **Контекст и отмена команд**: Использование `context` для управления временем жизни процессов
- **Документация API**: OpenAPI 3.0

## Consequences

### Положительные

- **Производительность**: Golang обеспечивает высокую производительность и низкое потребление ресурсов.
- **Масштабируемость**: Поддержка параллельного выполнения команд с использованием горутин и каналов.
- **Надежность**: PostgreSQL как база данных обеспечивает надежное хранение данных с поддержкой ACID-транзакций.
- **Управляемость**: Использование контекста для отмены команд позволяет эффективно управлять временем жизни процессов.
- **Документируемость**: Использование OpenAPI 3.0 позволяет легко документировать и тестировать API.

### Отрицательные

- **Сложность настройки**: Требуется настройка окружения для работы с PostgreSQL и Golang.
- **Обработка ошибок**: Необходима тщательная обработка ошибок при взаимодействии с базой данных и выполнении команд.

## Implementation Plan

1. **Настройка окружения**:
    - Установить PostgreSQL.
    - Настроить окружение для разработки на Go.

2. **Разработка API**:
    - Создать REST API для управления командами.
    - Использовать OpenAPI 3.0 для документирования API.

3. **Реализация функционала**:
    - Создать функции для создания, запуска, остановки команд.
    - Использовать горутины и каналы для параллельного выполнения команд.
    - Реализовать управление процессами с помощью `context`.

4. **Тестирование**:
    - Написать тесты для проверки корректности работы API и выполнения команд.

5. **Документация**:
    - Создать документацию по запуску и использованию программы.
    - Описать принятые архитектурные решения в виде ADR.
